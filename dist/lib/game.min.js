!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PIXI")):"function"==typeof define&&define.amd?define("memory-cards-game",["PIXI"],e):"object"==typeof exports?exports["memory-cards-game"]=e(require("PIXI")):t["memory-cards-game"]=e(t.PIXI)}(self,e=>(()=>{"use strict";var s={22:function(t,e,i){var s=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var r=Object.getOwnPropertyDescriptor(e,i);r&&("get"in r?e.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,r)}:function(t,e,i,s){t[s=void 0===s?i:s]=e[i]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&s(e,t,i);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=void 0;const n=a(i(700));class h{constructor(){var t;this.SPRITES="../assets/images/",this.SPRITE_WIDTH=150,this.SPRITE_HEIGHT=150,this.OFFSET=20,this.STEPS=0,this.MINUTES=0,this.SECONDS=0,this.TIMER=setInterval(()=>{}),this.app=new n.Application({width:720,height:720,backgroundColor:11194228,backgroundAlpha:.8}),null!=(t=document.getElementById("game"))&&t.appendChild(this.app.view),this.stage=new n.Container,this.cards=[],this.createCardMatrix(),this.stage.x=this.app.screen.width/2,this.stage.y=this.app.screen.height/2,this.stage.pivot.x=this.stage.width/2,this.stage.pivot.y=this.stage.height/2,this.app.stage.addChild(this.stage)}run(){this.cards.forEach(t=>{t.back.visible=!1}),this.delay(()=>{this.cards.forEach(t=>{t.back.visible=!0}),this.startTimer()},3e3),this.cards.forEach(t=>{t.back.on("pointerdown",t.onClick)})}startTimer(){var t=0;this.TIMER=setInterval(()=>{100==++t&&(t=0,this.SECONDS++,document.getElementById("seconds").innerHTML=(this.SECONDS/10<1?"0":"")+this.SECONDS.toString()),60==this.SECONDS&&(this.SECONDS=0,this.MINUTES++,document.getElementById("minutes").innerHTML=(this.MINUTES/10<1?"0":"")+this.MINUTES.toString(),document.getElementById("seconds").innerHTML=(this.SECONDS/10<1?"0":"")+this.SECONDS.toString())},10)}createCardMatrix(){for(var t=0;t<16;t++){const s={status:0,sprite:n.Sprite.from(this.SPRITES+`card_${t%8+1}.png`),back:n.Sprite.from(this.SPRITES+"back.png"),pictureId:t%8+1,onClick:()=>{s.back.visible=!1,s.status=1,this.STEPS++;const t=document.getElementById("stepCounter");t.innerHTML=this.STEPS.toString(),this.cards.forEach(t=>{1==t.status&&t!=s&&(t.pictureId==s.pictureId?t.status=s.status=2:(this.cards.forEach(t=>{t.back.interactive=!1,t.back.buttonMode=!1}),this.delay(()=>{t.status=s.status=0,t.back.visible=s.back.visible=!0,this.cards.forEach(t=>{t.back.interactive=!0,t.back.buttonMode=!0})},600)))}),this.cards.every(t=>2==t.status)&&this.finalize()}};s.back.width=s.sprite.width=this.SPRITE_WIDTH,s.back.height=s.sprite.height=this.SPRITE_HEIGHT,s.back.interactive=!0,s.back.buttonMode=!0,this.cards.push(s),this.stage.addChild(s.sprite),this.stage.addChild(s.back)}this.cards=this.cards.sort(function(){return Math.random()-.5});for(var e=0;e<4;e++)for(var i=0;i<4;i++)this.cards[4*e+i].back.x=this.cards[4*e+i].sprite.x=i*(this.SPRITE_WIDTH+this.OFFSET),this.cards[4*e+i].back.y=this.cards[4*e+i].sprite.y=e*(this.SPRITE_HEIGHT+this.OFFSET)}delay(t,e){var i;i=e,new Promise(t=>setTimeout(t,i)).then(()=>{t()})}finalize(){clearInterval(this.TIMER);var t=(this.MINUTES/10<1?"0":"")+this.MINUTES.toString(),e=(this.SECONDS/10<1?"0":"")+this.SECONDS.toString();const i=new n.Container,s=new n.Graphics;s.beginFill(16777215),s.alpha=.5,s.drawRect(0,0,this.app.screen.width,this.app.screen.height),s.endFill();var r=new n.TextStyle({fontFamily:"Nunito",fontSize:72,fontWeight:"bold",fill:"#ffffff",stroke:"#000000",strokeThickness:5});const a=new n.Text("ПОБЕДА!",r),h=(a.x=this.app.screen.width/2,a.y=this.app.screen.height/2-40,a.pivot.x=a.width/2,a.pivot.y=a.height/2,new n.Text("ВРЕМЯ: "+t+" : "+e));h.x=this.app.screen.width/2,h.y=this.app.screen.height/2+40,h.pivot.x=h.width/2,h.pivot.y=h.height/2,i.addChild(s),i.addChild(a),i.addChild(h),this.app.stage.addChild(i),this.delay(()=>{this.app.stage.removeChild(i),this.restart()},3e3)}restart(){this.STEPS=0,this.MINUTES=0,this.SECONDS=0;var t=document.getElementById("stepCounter");t.innerHTML=this.STEPS,(t=document.getElementById("seconds")).innerHTML=(this.SECONDS/10<1?"0":"")+this.SECONDS,(t=document.getElementById("minutes")).innerHTML=(this.MINUTES/10<1?"0":"")+this.MINUTES,this.cards.forEach(t=>{this.stage.removeChild(t.sprite),this.stage.removeChild(t.back)}),this.cards=[],this.createCardMatrix(),this.run()}}e.Game=h,window.onload=function(){(new h).run()}},700:t=>{t.exports=e}},r={};return function t(e){var i=r[e];if(void 0!==i)return i.exports;i=r[e]={exports:{}};return s[e].call(i.exports,i,i.exports,t),i.exports}(22)})());